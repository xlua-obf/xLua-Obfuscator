<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hercules Lua Obfuscator</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="icon" href="img/hercules_icon_svg.svg" type="image/svg+xml">
    <script src="/node_modules/monaco-editor/min/vs/loader.js"></script>
    <script>
        require.config({ paths: { vs: '/node_modules/monaco-editor/min/vs' } });
        window.MonacoEnvironment = {
            getWorkerUrl: function(workerId, label) {
                return `data:text/javascript;charset=utf-8,${encodeURIComponent(`
                    self.MonacoEnvironment = {
                        baseUrl: '${location.protocol}//${location.host}/node_modules/monaco-editor/min/'
                    };
                    importScripts('${location.protocol}//${location.host}/node_modules/monaco-editor/min/vs/base/worker/workerMain.js');
                `)}`;
            }
        };
    </script>
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="logo-link">
                <h1><img src="img/hercules_icon_svg.svg" alt="Hercules Logo"> XLua Obfuscator</h1>
                <p>Secure your Lua code with powerful obfuscation techniques</p>
            </a>
        </header>

        <main>
            <div class="upload-container">
                <form id="upload-form">
                    <div class="file-upload-container">
                        <div class="upload-icon">
                            <i class="fas fa-file-upload"></i>
                        </div>
                        <p>Select a Lua or text file containing Lua code to obfuscate</p>
                        <p class="drag-info">Drag & drop your file here or</p>
                        <label for="file-input" class="file-input-label">Select a file</label>
                        <input type="file" id="file-input" accept=".lua,.txt" hidden>
                        <p class="file-info" id="file-info">No file selected</p>
                    </div>

                    <div class="options-container">
                        <h2>Obfuscation Options</h2>
                        
                        <div class="option-group">
                            <h3>Options</h3>
                            <div class="radio-group">
                                <label>
                                    <input type="radio" name="preset" value="none" checked>
                                    <span>Custom</span>
                                </label>
                                <label>
                                    <input type="radio" name="preset" value="min">
                                    <span>Minimal</span>
                                </label>
                                <label>
                                    <input type="radio" name="preset" value="mid">
                                    <span>Medium</span>
                                </label>
                                <label>
                                    <input type="radio" name="preset" value="max">
                                    <span>Maximum (Recommended)</span>
                                </label>
                            </div>
                        </div>

                        <div class="option-group custom-options">
                            <h3>Custom Options</h3>
                            <div class="checkbox-grid">
                                <label>
                                    <input type="checkbox" name="controlFlow" checked>
                                    <span>Control Flow Obfuscation</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="stringEncoding">
                                    <span>String Encoding</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="variableRenaming" checked>
                                    <span>Variable Renaming</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="garbageCode" checked>
                                    <span>Garbage Code Injection</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="opaquePredicates" checked>
                                    <span>Opaque Predicates</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="functionInlining">
                                    <span>Function Inlining</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="compressor" checked>
                                    <span>Compressor</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="bytecodeEncoder">
                                    <span>Bytecode Encoder</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="stringToExpressions">
                                    <span>String to Expressions</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="vmGenerator" checked>
                                    <span>VM Generator</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="wrapInFunction" checked>
                                    <span>Wrap in Function</span>
                                </label>
                                <label>
                                    <input type="checkbox" name="antiTamper" checked>
                                    <span>Anti Tamper</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button type="submit" id="obfuscate-btn" disabled>
                            <i class="fas fa-lock"></i> Obfuscate!
                        </button>
                    </div>
                </form>
            </div>

            <div class="result-container" style="display: none;">
                <h2>New and obfuscated code:</h2>
                <div class="code-container">
                    <div id="monaco-editor-container"></div>
                </div>
                <div class="action-buttons">
                    <button id="download-btn">
                        <i class="fas fa-download"></i> Download as lua file
                    </button>
                    <button id="copy-btn">
                        <i class="fas fa-copy"></i> Copy
                    </button>
                    <button id="new-file-btn">
                        <i class="fas fa-file"></i> Obfuscate Another File
                    </button>
                </div>
            </div>
        </main>

        <div id="loading-overlay" style="display: none;">
            <div class="spinner"></div>
            <p>Obfuscating your code...</p>
        </div>
        
        <div id="error-modal" class="error-modal">
            <div class="error-modal-content">
                <div class="error-modal-header">
                    <h3><i class="fas fa-exclamation-triangle"></i> <span id="error-title">Error</span></h3>
                </div>
                <div class="error-modal-body">
                    <p id="error-message">An error has occurred.</p>
                    <div class="error-code" id="error-code"></div>
                </div>
                <div class="error-modal-footer">
                    <button id="error-ok-btn" class="error-modal-btn">OK</button>
                </div>
            </div>
        </div>

      
    </div>

    <script src="js/script.js"></script>
</body>
</html>
